services:
  octo-fiestarr:
    image: ghcr.io/bransoned/octo-fiestarr
    container_name: octo-fiestarr
    restart: unless-stopped
    ports:
      - "5274:8080"
    environment:
      - ASPNETCORE_ENVIRONMENT=Production
      # Navidrome/Subsonic server URL
      - Subsonic__Url=${SUBSONIC_URL:-http://localhost:4533}
      # Explicit content filter: All, ExplicitOnly, CleanOnly (default: ExplicitOnly)
      - Subsonic__ExplicitFilter=${EXPLICIT_FILTER:-ExplicitOnly}
      # Download mode: Track (only requested track), Album (full album when playing a track)
      - Subsonic__DownloadMode=${DOWNLOAD_MODE:-Track}
      # Download path inside container
      - Library__DownloadPath=/app/downloads
      # SquidWTF preferred audio quality
      - SquidWTF__Quality=${SQUIDWTF_QUALITY:-}
    volumes:
      - ${DOWNLOAD_PATH:-./downloads}:/app/downloads
